!function(){"use strict";angular.module("flipsnap",[]).directive("flipsnap",["$window","$parse","$timeout",function(a,b,c){return{transclude:!0,restrict:"A",scope:{},template:"<div ng-transclude></div>",link:function(d,e,f){function g(a,b){var c=a.attr(b);return void 0!==c&&null!==c}function h(a){return g(a,"flipsnap-pane")}function i(a){return g(a,"ng-repeat")}function j(a){u[a]||(u[a]=o.$watch(a,function(){c(function(){k(),l()})},!0))}function k(){n[0].hidden=s;var a=0;if(n.children().length>0)angular.forEach(n.children(),function(b){if(b=angular.element(b),h(b)&&(a+=b[0].offsetWidth,b.css("float","left")),i(b)){var c=b.attr("ng-repeat").match(/in\s+(.+)/)[1];j(c)}});else if(n[0].innerHTML.match(/ngRepeat/)){var b=n[0].innerHTML.match(/in\s+(.+)\s-->/)[1];j(b)}e.css("overflow","hidden"),n.css("width",a+"px"),n.attr("id",r),t=t||o.$watch(f.flipsnapOptions,l,!0)}function l(){var b=o[q],c=a.Flipsnap("#"+r,p);c.element.addEventListener("mousemove",function(a){a.stopPropagation()}),c.element.addEventListener("touchmove",function(a){a.stopPropagation()}),o[q]=c,m(),b&&b.destroy()}function m(){o[q]&&(o[q].canMoveNext=o[q].hasNext(),o[q].canMovePrev=o[q].hasPrev())}a.Flipsnap||(a.Flipsnap=function(){});var n=angular.element(e.children()[0]),o=d.$parent;f.flipsnapOptions=f.flipsnapOptions||{},f.flipsnapId=f.flipsnapId||"flipsnap",f.flipsnap=f.flipsnap||"flipsnap";var p=b(f.flipsnapOptions)(o),q=f.flipsnap,r=f.flipsnapId,s=n[0].hidden;n[0].hidden=!0;var t,u={};n.on("fspointmove",function(){o.$$phase?m():d.$apply(m)}),c(k)}}}])}();